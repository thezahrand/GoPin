<!doctype html>
<section class="card form-card">
<h2>Login</h2>
<div style="margin-top:12px;display:grid;gap:8px">
<input id="email" placeholder="Email" />
<input id="password" placeholder="Password" type="password" />
<button id="loginBtn" class="btn primary">Login</button>
</div>
</section>
</main>


<footer class="container muted small">If you are admin and can't access admin.html, set role to 'admin' in Firestore -> collection `user`</footer>


<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
<script src="firebase.js"></script>
<script>
document.getElementById('loginBtn').addEventListener('click', async ()=>{
const email = document.getElementById('email').value.trim();
const password = document.getElementById('password').value;
if(!email||!password) return alert('Email & password wajib');
try{
await auth.signInWithEmailAndPassword(email, password);
// fetch role
const uid = auth.currentUser.uid;
const doc = await db.collection('user').doc(uid).get();
const data = doc.exists ? doc.data() : {};
if(data.role === 'admin') location.href = 'admin.html';
else location.href = 'index.html';
}catch(err){ alert('Login gagal: '+err.message); }
});
</script>
</body>
</html>
